# 更新日志

## v2.0 - 2026-01-16

### 🎉 重大更新

#### 采集站优化
- ✅ **测试所有采集站** - 完整测试6个原有采集站，识别问题
- ✅ **替换无效站点** - 移除3个无法访问的采集站
- ✅ **新增5个可用站点** - 添加速播、最大、卧龙、光速、新浪资源
- ✅ **修复红牛资源** - 更正API地址为 hongniuzy2.com
- ✅ **采集站数量** - 从6个增加到8个（全部可用）

#### 功能增强
- ✅ **智能重试机制** - 失败自动重试2次
- ✅ **禁用SSL验证** - 解决部分站点证书问题
- ✅ **添加User-Agent** - 提高请求成功率
- ✅ **优化超时设置** - 从15秒调整为10秒
- ✅ **增强错误提示** - 详细显示错误原因和解决建议

#### 数据解析优化
- ✅ **支持多种响应格式** - 兼容 `list` 和 `data` 字段
- ✅ **JSON解析容错** - 解析失败自动重试
- ✅ **空结果提示** - 明确提示没有找到资源

#### 用户体验
- ✅ **版本号显示** - 界面显示 v2.0
- ✅ **站点状态标识** - 显示 ✓ 标记已测试可用站点
- ✅ **重试进度提示** - 显示重试进度 (1/2, 2/2)
- ✅ **错误分类处理** - HTTP错误、超时、SSL错误等分类提示

### 📊 测试结果

#### 采集站可用性测试
```
成功: 8/8 (100%)

✓ 量子资源 - 稳定可用
✓ 360资源 - 稳定可用（偶尔超时）
✓ 速播资源 - 稳定可用
✓ 最大资源 - 稳定可用
✓ 卧龙资源 - 稳定可用
✓ 光速资源 - 稳定可用
✓ 新浪资源 - 稳定可用
✓ 红牛资源 - 稳定可用
```

#### 功能测试
- ✅ 搜索功能 - 正常
- ✅ 详情获取 - 正常
- ✅ 播放列表解析 - 正常
- ✅ 范围选择 - 正常
- ✅ 批量导入 - 正常
- ✅ 重试机制 - 正常

### 🔧 技术改进

#### 代码优化
```python
# 新增警告抑制
warnings.filterwarnings('ignore', message='Unverified HTTPS request')

# 增强请求配置
resp = requests.get(
    api_url,
    timeout=10,
    verify=False,
    headers={'User-Agent': 'Mozilla/5.0...'}
)

# 智能重试循环
for attempt in range(retry + 1):
    try:
        # 请求逻辑
        ...
    except Exception:
        if attempt < retry:
            continue  # 重试
        else:
            return []  # 失败
```

### 📝 文档更新
- ✅ 更新 README.md - 新增采集站列表
- ✅ 创建 USAGE.md - 详细使用指南
- ✅ 创建 CHANGELOG.md - 版本更新记录
- ✅ 更新 collectors.example.json - 配置示例

---

## v1.0 - 2026-01-16 (初始版本)

### 功能
- ✅ 基础搜索功能
- ✅ 视频详情查看
- ✅ 播放列表解析
- ✅ 批量导入到 SyncTV
- ✅ 支持6个采集站

### 采集站
1. 魔都资源
2. 淘片资源
3. 360资源
4. 红牛资源
5. 非凡资源
6. 量子资源

### 已知问题
- ❌ 部分采集站无法访问
- ❌ 红牛资源API地址错误
- ❌ 非凡资源返回非JSON格式
- ❌ 缺少重试机制
- ❌ SSL证书验证导致失败

---

## 待开发功能

### v2.1 计划
- [ ] XML格式采集站支持
- [ ] 多采集站同时搜索
- [ ] 搜索结果缓存
- [ ] 历史记录功能
- [ ] 收藏夹功能

### v3.0 计划
- [ ] Web界面
- [ ] API服务
- [ ] 定时任务
- [ ] 自动更新检测
- [ ] 批量房间管理

---

## 贡献者
- 主要开发: Claude (Anthropic)
- 需求提供: 用户

## 反馈
如有问题或建议，请提交 Issue。
