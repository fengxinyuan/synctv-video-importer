# SyncTV 采集站导入工具 - 使用指南

## 快速开始

### 1. 启动工具

```bash
cd /root/synctv-video-importer
python3 synctv_collector.py
```

### 2. 完整操作示例

```
======================================================================
  SyncTV 采集站资源搜索导入工具 v2.0
======================================================================

可用采集站 (已测试可用):
  [1] ✓ 量子资源
  [2] ✓ 360资源
  [3] ✓ 速播资源
  [4] ✓ 最大资源
  [5] ✓ 卧龙资源
  [6] ✓ 光速资源
  [7] ✓ 新浪资源
  [8] ✓ 红牛资源

选择采集站 [1-8]: 1
搜索关键词: 斗破苍穹

🔍 正在搜索 [量子资源]: 斗破苍穹

找到 19 个结果：

序号   名称                           类型         年份
------------------------------------------------------------
1    斗破苍穹 年番                    国产动漫       2022
2    斗破苍穹3：除恶                  剧情片        2024
3    斗破苍穹之少年归来                国产剧        2023
...

选择结果序号 (0=退出): 1

📺 斗破苍穹 年番
   类型: 国产动漫
   年份: 2022
   主演: 内详

可用播放源:
  [1] liangzi - 181 集
  [2] lzm3u8 - 181 集

选择播放源 [1-2]: 1

共 181 集
导入范围 (1-181, 或 'all' 全部, 或 '1-10' 范围): 1-10

准备导入 10 集:
  - 第01集
  - 第02集
  ...

SyncTV 房间 ID: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
用户名 (默认: root):
密码 (默认: root):

正在登录...
✓ 登录成功

确认导入 10 集到房间? (y/N): y

✓ 成功导入 10 个视频

完成！
```

## 导入范围选项

### 导入全部
```
导入范围: all
```

### 导入范围（1-10集）
```
导入范围: 1-10
```

### 导入单集（第5集）
```
导入范围: 5
```

## 常见使用场景

### 场景1: 导入电视剧全集
1. 搜索电视剧名称
2. 选择正确的结果
3. 选择画质最好的播放源
4. 输入 `all` 导入全部

### 场景2: 导入部分集数
1. 搜索电视剧名称
2. 选择结果
3. 输入范围，如 `1-20` 导入前20集

### 场景3: 导入电影
1. 搜索电影名称
2. 选择结果
3. 通常电影只有1集，输入 `1` 或 `all`

## 采集站选择建议

| 采集站 | 特点 | 推荐场景 |
|--------|------|----------|
| 量子资源 | 资源全、更新快 | 新番、热门剧 |
| 360资源 | 资源稳定 | 老剧、经典 |
| 速播资源 | 速度快 | 电影 |
| 最大资源 | 资源多 | 冷门资源 |
| 卧龙资源 | 高清多 | 追求画质 |

## 技巧和提示

### 1. 搜索关键词
- ✅ 使用准确的名称：`斗破苍穹`
- ✅ 使用简短关键词：`斗破`
- ❌ 避免过长：`斗破苍穹第一季高清`

### 2. 选择播放源
- 优先选择 `liangzi`、`lzm3u8` 等常见源
- 如果播放失败，重新导入时选择其他源

### 3. 批量导入
- 小于50集：直接 `all`
- 超过50集：分批导入，如 `1-50`、`51-100`

### 4. 失败重试
- 工具自动重试2次
- 如果仍失败，尝试更换采集站

## 错误处理

### 搜索超时
```
✗ 请求超时，采集站可能无法访问
```
**解决方法：** 更换其他采集站

### 没有找到资源
```
✗ 没有找到相关资源
```
**解决方法：**
1. 更换关键词
2. 更换采集站
3. 尝试使用简称

### 登录失败
```
✗ 登录失败: 403
```
**解决方法：**
1. 检查用户名密码
2. 确认 SyncTV 服务运行中
3. 检查 SYNCTV_URL 配置

### 导入失败
```
✗ 导入失败: 404
```
**解决方法：**
1. 检查房间ID是否正确（32位字符）
2. 确认有房间管理权限

## 高级配置

### 修改 SyncTV 地址
编辑 `synctv_collector.py` 第17行：
```python
SYNCTV_URL = "http://your-server:8080"
```

### 添加自定义采集站
编辑 `synctv_collector.py` 第22-71行，在 `COLLECTORS` 字典中添加：
```python
"9": {
    "name": "自定义资源",
    "api": "https://api.example.com/api.php/provide/vod/",
    "type": "json",
    "status": "✓"
}
```

### 调整超时时间
编辑 `search_collector` 函数中的 `timeout` 参数（第107行）：
```python
timeout=15,  # 从10秒改为15秒
```

### 调整重试次数
修改 `search_collector` 函数调用（第92行）：
```python
def search_collector(collector_id, keyword, retry=3):  # 从2改为3
```

## 版本更新记录

### v2.0 (当前版本)
- ✅ 支持8个已测试可用的采集站
- ✅ 新增智能重试机制
- ✅ 优化数据解析逻辑
- ✅ 增强错误处理
- ✅ 替换无效采集站

### v1.0
- 初始版本
- 支持6个采集站
- 基础搜索和导入功能
